# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),Profile=str_remove(Profile, "Personal Homepage"))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df1,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))
df_m<-merge(df_m,df6,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")),
Deviation_from_median_confidence=Confidence-Medianconf)%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),Profile=str_remove(Profile, "Personal Homepage"))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df1,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))
df_m<-merge(df_m,df6,by=c("Name"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")),
Deviation_from_median_confidence=Confidence-Medianconf)%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
View(df_m)
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),Profile=str_remove(Profile, "Personal Homepage"))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df6,df1,by=c("Name","Question"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
View(df_m)
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
View(df_m)
# merge
df_m<-merge(df1,df6,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
View(df6)
View(df_m)
# merge
df_m<-merge(df6,df1,by=c("Name"))%>%select(Name,Institution,Question)%>%
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
# merge
df_m<-merge(df6,df1,by=c("Name"))%>%select(Name,Institution,Question)
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),Profile=str_remove(Profile, "Personal Homepage"))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df6,df1,by=c("Name"))%>%select(Name,Institution,Question)
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
View(df_m)
# merge
df_m<-merge(df6,df1,by=c("Name"))%>%select(Name,Institution,Question,Confidence)
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
View(df6)
View(df_m)
df_m<-merge(df6,df1,by=c("Name"))%>%select(Name,Institution,Question,Confidence)
View(df_m)
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),Profile=str_remove(Profile, "Personal Homepage"))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Confidence))
# write csv
write_csv(df4,"cleaned_data_US.csv")
write_csv(df_m,"cleaned_data_US.csv")
# merge
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Medianconf))
# write csv
write_csv(df_m,"cleaned_data_US.csv")
df_m<-merge(df6,df1,by=c("Name"))
View(df_m)
write_csv(df_6,"cleaned_data_US_short.csv")
write_csv(df6,"cleaned_data_US_short.csv")
View(df6)
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile=str_remove(Profile, '\"'))%>%
rename(Institution=Profile)
write_csv(df6,"cleaned_data_US_short.csv")
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile=str_remove(Profile, '"'))%>%
rename(Institution=Profile)
write_csv(df6,"cleaned_data_US_short.csv")
View(df6)
?write_csv
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"))%>%
rename(Institution=Profile)
write.table(df6,"cleaned_data_US_short.csv",quote="FALSE",sep=",")
write.table(df6,"cleaned_data_US_short.csv",quote=FALSE,sep=",")
?write.table
write.table(df6,"cleaned_data_US_short.csv",quote=FALSE,sep=",",row.names = FALSE)
write_csv(df_m%>%select(Name,Institution),"cleaned_data_short_US.csv")
write_csv(df_m%>%select(Name,Institution),"cleaned_data_namesonly_US.csv")
write_csv(df6%>%select(Name),"cleaned_data_namesonly_US.csv")
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Medianconf))
# write csv
write_csv(df_m,"cleaned_data_US.csv")
write_csv(df6%>%select(Name),"cleaned_data_namesonly_US.csv")
View(df_m)
library(stringr)
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"))%>%
Profile(str_trim(Profile))%>%
rename(Institution=Profile)
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile(str_trim(Profile))%>%
rename(Institution=Profile)
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile=str_trim(Profile))%>%
rename(Institution=Profile)
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile=str_trim(Profile))%>%
rename(Institution=Profile)
View(df6)
# merge
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Medianconf))
# write csv
write_csv(df_m,"cleaned_data_US.csv")
write_csv(df6%>%select(Name),"cleaned_data_namesonly_US.csv")
write_csv(df6%>%select(Name,Institution),"cleaned_data_namesonly_US.csv")
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
library(stringr)
# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile=str_trim(Profile))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Medianconf))
# write csv
write_csv(df_m,"cleaned_data_US.csv")
write_csv(df6%>%select(Name,Institution),"cleaned_data_namesonly_US.csv")
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
library(stringr)
# load data
df<-read_delim("data_output_EU.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile=str_trim(Profile))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Medianconf))
# write csv
write_csv(df_m,"cleaned_data_EU.csv")
write_csv(df6%>%select(Name,Institution),"cleaned_data_namesonly_EU.csv")
?write_csv
write_excel_csv(df6%>%select(Name,Institution),"cleaned_data_namesonly_EU.csv")
write_excel_csv(df_m,"cleaned_data_EU.csv")
write_excel_csv(df6%>%select(Name,Institution),"cleaned_data_namesonly_EU.csv")
setwd ("C:\\Github\\igm_survey_gender\\scraping")
library("tidyverse")
library(stringr)
# load data
df<-read_delim("data_output_US.csv",delim="|")
# Confidence
df1<-df%>%select(Confidence,Name)%>%
separate(Confidence,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Confidence")%>%
mutate(Confidence=as.numeric(Confidence))
# Medianconf
df2<-df%>%select(Medianconf,Name)%>%
separate(Medianconf,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Medianconf")%>%
mutate(Medianconf=as.numeric(Medianconf))
# Vote
df3<-df%>%select(Votes,Name)%>%
separate(Votes,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Vote")
# Median Vote
df4<-df%>%select(Median,Name)%>%
separate(Median,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Median")
# Comment
df5<-df%>%select(Comment,Name)%>%
separate(Comment,into = paste("CONF", 1:1000, sep = "_"),sep=";")%>%
pivot_longer(1:1000, names_to="Question",values_to = "Comment")
# Institution
df6<-df%>%select(Profile,Name)%>%
mutate(Profile=str_remove(Profile, Name),
Profile=str_remove(Profile, "Personal Homepage"),
Profile=str_trim(Profile))%>%
rename(Institution=Profile)
# merge
df_m<-merge(df6,df1,by=c("Name"))
df_m<-merge(df_m,df2,by=c("Name","Question"))
df_m<-merge(df_m,df3,by=c("Name","Question"))
df_m<-merge(df_m,df4,by=c("Name","Question"))
df_m<-merge(df_m,df5,by=c("Name","Question"))%>%
mutate(Question=as.numeric(str_remove(Question, "CONF_")))%>%
arrange(Name,Question)%>%
filter(!is.na(Medianconf))
# write csv
write_excel_csv(df_m,"cleaned_data_US.csv")
write_excel_csv(df6%>%select(Name,Institution),"cleaned_data_namesonly_US.csv")
